<div class="cart-page">
  <h1>Cart Page</h1>
  <div class="row">
    <div class="col-sm-8 details">
      <ul *ngFor="let item of cartItems" class="cart-item">
        <li>
          <img src="{{ item.product?.image }}" alt="" />
        </li>
        <li>
          <span>{{ item.product?.name }}</span>
        </li>
        <li>
          <span>
            Price:
            <ng-container *ngIf="item.product?.discount; else noDiscount">
              <s>{{ item.product?.price }} $</s>
              <b>
                {{ (item.product?.price ?? 0) - (item.product?.discount ?? 0) }}
                $
              </b>
            </ng-container>
            <ng-template #noDiscount> {{ item.product?.price }} $ </ng-template>
          </span>
        </li>
        <li>
          <span>Quantity : {{ item.quantity }}</span>
        </li>
        <li>
          <button class="form-button" (click)="removeFromCart(item.id!)">
            Remove
          </button>
        </li>
      </ul>
    </div>

    <!-- Summary -->
    <div class="col-sm-4 summary">
      <h3>Summary</h3>
      <ul>
        <li>
          <span>Amount:</span> <span>${{ totalPrice.toFixed(2) }}</span>
        </li>
        <li>
          <span>Tax:</span> <span>${{ tax.toFixed(2) }}</span>
        </li>
        <li>
          <span>Delivery:</span> <span>${{ delivery.toFixed(2) }}</span>
        </li>
        <li>
          <span>Discount:</span> <span>-${{ discount.toFixed(2) }}</span>
        </li>
        <li>
          <span><h4>Total</h4></span>
          <span
            ><h4>${{ totalPrice.toFixed(2) }}</h4></span
          >
        </li>
      </ul>
      <button (click)="checkout()" class="form-button max-width">
        Checkout
      </button>
    </div>
  </div>
</div>
